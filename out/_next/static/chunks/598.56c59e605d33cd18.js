(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[598],{75508:function(e,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.ComposedStore=void 0;const c=b(28877);class d extends c.ObservableStore{constructor(a){super({}),this._children=a||{},Object.keys(this._children).forEach(a=>{const b=this._children[a];this._addChild(a,b)})}_addChild(c,a){const b=b=>{const a=this.getState();a[c]=b,this.putState(a)};a.subscribe(b),b(a.getState())}}a.ComposedStore=d},70401:function(e,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.MergedStore=void 0;const c=b(28877);class d extends c.ObservableStore{constructor(a=[]){super({}),this._children=a,a.forEach(a=>this._addChild(a)),this._updateWholeState()}_addChild(a){a.subscribe(()=>this._updateWholeState())}_updateWholeState(){const a=this._children.map(a=>a.getState()),b=Object.assign({},...a);this.putState(b)}}a.MergedStore=d},28877:function(f,a,b){"use strict";var c=this&&this.__importDefault||function(a){return a&&a.__esModule?a:{"default":a}};Object.defineProperty(a,"__esModule",{value:!0}),a.ObservableStore=void 0;const d=c(b(19394));class e extends d.default{constructor(a){super(),a?this._state=a:this._state={}}getState(){return this._getState()}putState(a){this._putState(a),this.emit("update",a)}updateState(a){if(a&&"object"==typeof a){const b=this.getState();this.putState(Object.assign(Object.assign({},b),a))}else this.putState(a)}subscribe(a){this.on("update",a)}unsubscribe(a){this.removeListener("update",a)}_getState(){return this._state}_putState(a){this._state=a}}a.ObservableStore=e},97969:function(d,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.storeAsStream=void 0;const c=b(79681);class e extends c.Duplex{constructor(a){super({objectMode:!0}),this.resume(),this.handler=a=>this.push(a),this.obsStore=a,this.obsStore.subscribe(this.handler)}pipe(a,b){const c=super.pipe(a,b);return a.write(this.obsStore.getState()),c}_write(a,c,b){this.obsStore.putState(a),b()}_read(a){}_destroy(a,b){this.obsStore.unsubscribe(this.handler),super._destroy(a,b)}}a.storeAsStream=function(a){return new e(a)}},12724:function(d,a,b){"use strict";var e=this&&this.__createBinding||(Object.create?function(b,d,c,a){void 0===a&&(a=c),Object.defineProperty(b,a,{enumerable:!0,get:function(){return d[c]}})}:function(c,d,b,a){void 0===a&&(a=b),c[a]=d[b]}),c=this&&this.__exportStar||function(b,c){for(var a in b)"default"===a||Object.prototype.hasOwnProperty.call(c,a)||e(c,b,a)};Object.defineProperty(a,"__esModule",{value:!0}),c(b(97969),a),c(b(75508),a),c(b(70401),a),c(b(28877),a),c(b(26546),a)},26546:function(c,a,b){"use strict";Object.defineProperty(a,"__esModule",{value:!0}),a.storeTransformStream=void 0;const d=b(14650);a.storeTransformStream=function(a){return d.obj((c,f,b)=>{try{const d=a(c);b(null,d);return}catch(e){b(e);return}})}},35796:function(d,b,a){"use strict";a.d(b,{d:function(){return e}});var c=a(45624);class e extends c.J5{async authenticateUser(){var b;if(!this.provider||!(null!==(b=this.chainConfig)&& void 0!==b&&b.chainId))throw c.RM.notConnectedError();const{chainNamespace:e,chainId:h}=this.chainConfig;if(this.status!==c.MP.CONNECTED)throw c.RM.notConnectedError("Not connected with wallet, Please login/connect first");const a=await this.provider.request({method:"eth_accounts"});if(a&&a.length>0){const d=(0,c.Cb)(a[0],this.name);if(d){const i=(0,c.$E)(d);if(!i)return{idToken:d}}const j={domain:window.location.origin,uri:window.location.href,address:a[0],chainId:parseInt(h,16),version:"1",nonce:Math.random().toString(36).slice(2),issuedAt:new Date().toISOString()},f=await (0,c.tV)(j,e),k=await this.provider.request({method:"personal_sign",params:[f,a[0]]}),g=await (0,c.rn)(e,k,f,this.name,this.sessionTime);return(0,c.Fr)(a[0],this.name,g),{idToken:g}}throw c.RM.notConnectedError("Not connected with wallet, Please login/connect first")}async disconnect(){if(this.status!==c.MP.CONNECTED)throw c.RM.disconnectionError("Not connected with wallet");const a=await this.provider.request({method:"eth_accounts"});a&&a.length>0&&(0,c.qz)(a[0],this.name)}}},6598:function(u,g,a){"use strict";a.r(g),a.d(g,{TorusWalletAdapter:function(){return as}});var i=a(4942),v=a(20917),h=a(95844),j=a(72378),w=a.n(j),x=a(12724),y=a(79826),k=a(64063),z=a.n(k),A=a(24970),l=a(74286),B=a.n(l),m=a(2043),n=a.n(m),o=a(23482),C=a.n(o),p=a(17187),D=a(48764).Buffer;const f={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord"},d={GOOGLE:"google",FACEBOOK:"facebook",TWITCH:"twitch",REDDIT:"reddit",DISCORD:"discord",EMAIL_PASSWORDLESS:"torus-auth0-email-passwordless"},E={[d.GOOGLE]:"tkey-google",[d.FACEBOOK]:"tkey-facebook",[d.TWITCH]:"tkey-twitch",[d.REDDIT]:"tkey-reddit",[d.DISCORD]:"tkey-discord",[d.EMAIL_PASSWORDLESS]:"tkey-auth0-email-passwordless"},b={MOONPAY:"moonpay",WYRE:"wyre",RAMPNETWORK:"rampnetwork",XANPOOL:"xanpool",MERCURYO:"mercuryo",TRANSAK:"transak"},c={MAINNET:"mainnet",MATIC:"matic",BSC_MAINNET:"bsc_mainnet",AVALANCHE_MAINNET:"avalanche_mainnet",XDAI:"xdai"},F={BOTTOM_LEFT:"bottom-left",TOP_LEFT:"top-left",BOTTOM_RIGHT:"bottom-right",TOP_RIGHT:"top-right"},G={[b.MOONPAY]:["AUD","BGN","BRL","CAD","CHF","CNY","COP","CZK","DKK","DOP","EGP","EUR","GBP","HKD","HRK","IDR","ILS","JPY","JOD","KES","KRW","KWD","LKR","MAD","MXN","MYR","NGN","NOK","NZD","OMR","PEN","PKR","PLN","RON","RUB","SEK","SGD","THB","TRY","TWD","USD","VND","ZAR"],[b.WYRE]:["USD","EUR","GBP","AUD","CAD","NZD","ARS","BRL","CHF","CLP","COP","CZK","DKK","HKD","ILS","INR","ISK","JPY","KRW","MXN","MYR","NOK","PHP","PLN","SEK","THB","VND","ZAR"],[b.RAMPNETWORK]:["USD","EUR","GBP"],[b.XANPOOL]:["SGD","HKD","THB","PHP","INR","IDR","MYR","AUD","NZD","KRW"],[b.MERCURYO]:["EUR","USD","GBP","TRY","JPY","BRL","NGN","VND","MXN","KRW"],[b.TRANSAK]:["ARS","AUD","BBD","BGN","BMD","BRL","CAD","CHF","CLP","CRC","CZK","DKK","DOP","EUR","FJD","FKP","GBP","GIP","HRK","HUF","IDR","ILS","ISK","JMD","JPY","KES","KRW","MDL","MXN","MYR","NOK","NZD","PEN","PHP","PLN","PYG","RON","SEK","SGD","THB","TRY","TZS","USD","ZAR"]},H=new Set(["ETH","USDT","USDC","TUSD","EOSDT","USD","DAI","GUSD","DKKT","PAX","ILS","RUB","BYN","EUR","GBP","JPY","KRW","PLN","MXN","AUD","BRL","CAD","CHF","KPW","LAK","LBP","LKR","XOF","CNHT","DOGE","UAH","TRY","HKD","XJP","SGD","USC","NZD","NGN","RUR","COP","GHS","EGP","IDR","BHD","CRC","PEN","AED","DOP","PKR","HUF","VND","XAR","LTC","RON","OMR","MYR","DKK","UGX","ZMW","SAR","SEK","GEL","RWF","IRR","TZS","CNY","VEF","BDT","HRK","CLP","THB","XAF","ARS","UYU","SZL","KZT","NOK","KES","PAB","INR","CZK","MAD","TWD","PHP","ZAR","BOB","CDF","DASH","VES","ISK","MWK","BAM","TTD","XRP","JOD","RSD","HNL","BGN","GTQ","BWP","XMR","MMK","QAR","AOA","KWD","MUR","WUSD","WEUR","WAVES","WTRY","LRD","LSL","LYD","AWG","MDL","BTO","EURS","CHFT","MKD","MNT","MOP","MRO","MVR","VOLLAR","CKUSD","KHR","VUV","BITCNY","QC","BBD","NAD","NPR","PGK","PYG","BIF","BMD","BND","XLM","BNB","SCR","BAT","CRO","HT","KCS","LEO","LINK","MKR","NPXS","OMG","REP","ZB","ZIL","ZRX","BCH","BZD","CUP","CVE","DJF","DZD","ERN","ETB","FJD","FKP","BUSD","ANCT","ALL","AMD","ANG","CNYX","IQD","UZS","TND","GGP","XAU","KGS","GIP","JMD","ZEC","USDP","BSV","EMC2","SNT","GTO","POWR","EUSD","EURT","BCY","BTS","ATM","BLOCKPAY","ARDR","AMP","B2X","BITGOLD","BITEUR","ATB","BITUSD","AGRS","DFXT","HIKEN","BIX","KNC","EOS","COB","COSS","BMH","NANO","BDG","BNT","XVG","LKK1Y","LKK","USDK","EURN","NZDT","JSE","GMD","GNF","GYD","YER","XPF","HTG","SLL","SOS","WST","SVC","SYP","NEO","KMF","JUMP","AYA","BLAST","WGR","BCN","BTG","URALS","INN","USDQ","CNH","HUSD","BKRW","NZDX","EURX","CADX","USDEX","JPYX","AUDX","VNDC","EON","GBPX","CHFX","USDJ","IDRT","USDS","USDN","BIDR","IDK","BSD","BTN","KYD","NIO","SBD","SDG","SHP","TOP","XCD","XCHF","CNYT","GYEN","ZUSD","GOLD","TRX","TRYB","PLATC","STRAX","UST","GLM","VAI","BRZ","DDRST","XAUT","MIM"]);function e(a){const b=G[a];return b.filter(a=>H.has(a))}const q={[b.MOONPAY]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"4.5% or 5 USD",line3:"2,000\u20AC/day, 10,000\u20AC/mo",supportPage:"https://help.moonpay.io/en/",minOrderValue:24.99,maxOrderValue:5e4,validCurrencies:e(b.MOONPAY),validCryptoCurrenciesByChain:{[c.MAINNET]:[{value:"aave",display:"AAVE"},{value:"bat",display:"BAT"},{value:"dai",display:"DAI"},{value:"eth",display:"ETH"},{value:"mkr",display:"MKR"},{value:"matic",display:"MATIC"},{value:"usdt",display:"USDT"},{value:"usdc",display:"USDC"}],[c.MATIC]:[{value:"eth_polygon",display:"ETH"},{value:"matic_polygon",display:"MATIC"},{value:"usdc_polygon",display:"USDC"}],[c.BSC_MAINNET]:[{value:"bnb_bsc",display:"BNB"},{value:"busd_bsc",display:"BUSD"}],[c.AVALANCHE_MAINNET]:[{value:"avax_cchain",display:"AVAX"}]},includeFees:!0,api:!0,enforceMax:!1},[b.WYRE]:{line1:"Apple Pay/ Debit/ Credit Card",line2:"4.9% + 30\xa2 or 5 USD",line3:"$250/day",supportPage:"https://support.sendwyre.com/en/",minOrderValue:5,maxOrderValue:500,validCurrencies:e(b.WYRE),validCryptoCurrenciesByChain:{[c.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"BAT",display:"BAT"},{value:"BUSD",display:"BUSD"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"MKR",display:"MKR"},{value:"UNI",display:"UNI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[c.MATIC]:[{value:"MUSDC",display:"USDC"}],[c.AVALANCHE_MAINNET]:[{value:"AVAXC",display:"AVAXC"}]},includeFees:!1,api:!0,enforceMax:!1},[b.RAMPNETWORK]:{line1:"Debit Card/ <br>Apple Pay/ Bank transfer",line2:"0.49% - 2.9%",line3:"5,000\u20AC/purchase, 20,000\u20AC/mo",supportPage:"https://instant.ramp.network/",minOrderValue:50,maxOrderValue:2e4,validCurrencies:e(b.RAMPNETWORK),validCryptoCurrenciesByChain:{[c.MAINNET]:[{value:"ETH",display:"ETH"},{value:"DAI",display:"DAI"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[c.MATIC]:[{value:"MATIC_DAI",display:"DAI"},{value:"MATIC_MATIC",display:"MATIC"},{value:"MATIC_USDC",display:"USDC"}],[c.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,api:!0,receiveHint:"walletTopUp.receiveHintRamp",enforceMax:!1},[b.XANPOOL]:{line1:"PayNow/ InstaPay/ FPS/ GoJekPay/ UPI/ PromptPay/ <br>ViettelPay/ DuitNow",line2:"2.5% buying, 3% selling",line3:"$2,500 / day",supportPage:"mailto:support@xanpool.com",minOrderValue:100,maxOrderValue:2500,validCurrencies:e(b.XANPOOL),validCryptoCurrenciesByChain:{[c.MAINNET]:[{value:"ETH",display:"ETH"},{value:"USDT",display:"USDT"}]},includeFees:!0,api:!0,sell:!0,enforceMax:!1},[b.MERCURYO]:{line1:"Credit/ Debit Card/ Apple Pay",line2:"3.95% or 4 USD",line3:"10,000\u20AC/day, 25,000\u20AC/mo",supportPage:"mailto:support@mercuryo.io",minOrderValue:30,maxOrderValue:5e3,validCurrencies:e(b.MERCURYO),validCryptoCurrenciesByChain:{[c.MAINNET]:[{value:"ETH",display:"ETH"},{value:"BAT",display:"BAT"},{value:"USDT",display:"USDT"},{value:"DAI",display:"DAI"}],[c.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"},{value:"1INCH",display:"1INCH"}]},includeFees:!0,api:!0,enforceMax:!1},[b.TRANSAK]:{line1:"Apple & Google Pay / Credit/Debit Card<br/>Bangkok Bank Mobile & iPay<br/>Bank Transfer (sepa/gbp) / SCB Mobile & Easy",line2:"0.99% - 5.5% or 5 USD",line3:"$5,000/day, $28,000/mo",supportPage:"https://support.transak.com/hc/en-US",minOrderValue:30,maxOrderValue:500,validCurrencies:e(b.TRANSAK),validCryptoCurrenciesByChain:{[c.MAINNET]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"ETH",display:"ETH"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"}],[c.MATIC]:[{value:"AAVE",display:"AAVE"},{value:"DAI",display:"DAI"},{value:"MATIC",display:"MATIC"},{value:"USDC",display:"USDC"},{value:"USDT",display:"USDT"},{value:"WETH",display:"WETH"}],[c.BSC_MAINNET]:[{value:"BNB",display:"BNB"},{value:"BUSD",display:"BUSD"}],[c.AVALANCHE_MAINNET]:[{value:"AVAX",display:"AVAX"}]},includeFees:!0,enforceMax:!0}};var r={supportedVerifierList:Object.values(d),paymentProviders:q,api:"https://api.tor.us",translations:{en:{embed:{continue:"Continue",actionRequired:"Authorization required",pendingAction:"Click continue to proceed with your request in a popup",cookiesRequired:"Cookies Required",enableCookies:"Please enable cookies in your browser preferences to access Torus",clickHere:"More Info"}},de:{embed:{continue:"Fortsetzen",actionRequired:"Autorisierung erforderlich",pendingAction:"Klicken Sie in einem Popup auf Weiter, um mit Ihrer Anfrage fortzufahren",cookiesRequired:"Cookies ben\xf6tigt",enableCookies:"Bitte aktivieren Sie Cookies in Ihren Browsereinstellungen, um auf Torus zuzugreifen",clickHere:"Mehr Info"}},ja:{embed:{continue:"\u7D99\u7D9A\u3059\u308B",actionRequired:"\u8A8D\u8A3C\u304C\u5FC5\u8981\u3067\u3059",pendingAction:"\u7D9A\u884C\u3092\u30AF\u30EA\u30C3\u30AF\u3057\u3066\u3001\u30DD\u30C3\u30D7\u30A2\u30C3\u30D7\u3067\u30EA\u30AF\u30A8\u30B9\u30C8\u3092\u7D9A\u884C\u3057\u307E\u3059",cookiesRequired:"\u5FC5\u8981\u306A\u30AF\u30C3\u30AD\u30FC",enableCookies:"Torus\u306B\u30A2\u30AF\u30BB\u30B9\u3059\u308B\u306B\u306F\u3001\u30D6\u30E9\u30A6\u30B6\u306E\u8A2D\u5B9A\u3067Cookie\u3092\u6709\u52B9\u306B\u3057\u3066\u304F\u3060\u3055\u3044\u3002",clickHere:"\u8A73\u3057\u304F\u306F"}},ko:{embed:{continue:"\uACC4\uC18D\uD558\uB2E4",actionRequired:"\uC2B9\uC778 \uD544\uC694",pendingAction:"\uD31D\uC5C5\uC5D0\uC11C \uC694\uCCAD\uC744 \uC9C4\uD589\uD558\uB824\uBA74 \uACC4\uC18D\uC744 \uD074\uB9AD\uD558\uC2ED\uC2DC\uC624.",cookiesRequired:"\uCFE0\uD0A4 \uD544\uC694",enableCookies:"\uBE0C\uB77C\uC6B0\uC800 \uD658\uACBD \uC124\uC815\uC5D0\uC11C \uCFE0\uD0A4\uB97C \uD65C\uC131\uD654\uD558\uC5EC Torus\uC5D0 \uC561\uC138\uC2A4\uD558\uC2ED\uC2DC\uC624.",clickHere:"\uB354 \uB9CE\uC740 \uC815\uBCF4"}},zh:{embed:{continue:"\u7EE7\u7EED",actionRequired:"\u9700\u8981\u6388\u6743",pendingAction:"\u5355\u51FB\u7EE7\u7EED\u4EE5\u5728\u5F39\u51FA\u7A97\u53E3\u4E2D\u7EE7\u7EED\u60A8\u7684\u8BF7\u6C42",cookiesRequired:"\u5FC5\u586BCookie",enableCookies:"\u8BF7\u5728\u60A8\u7684\u6D4F\u89C8\u5668\u9996\u9009\u9879\u4E2D\u542F\u7528cookie\u4EE5\u8BBF\u95EETorus\u3002",clickHere:"\u66F4\u591A\u4FE1\u606F"}}},prodTorusUrl:"",localStorageKeyPrefix:"torus-"};const I=a=>new Promise((b,c)=>{null!=window.document.body?Promise.resolve(a()).then(b).catch(c):window.document.addEventListener("DOMContentLoaded",()=>{Promise.resolve(a()).then(b).catch(c)})}),J=b=>{const a=window.document.createElement("template"),c=b.trim();return a.innerHTML=c,a.content.firstChild},K=function(c,d,g){for(var b=arguments.length,e=new Array(b>3?b-3:0),a=3;a<b;a++)e[a-3]=arguments[a];const f=()=>{g(...e),c.removeEventListener(d,f)};c.addEventListener(d,f)},L=(a,b,d)=>{const c=e=>{d(e),a.removeListener(b,c)};a.on(b,c)};async function M(){return new Promise(a=>{"loading"!==document.readyState?a():K(document,"DOMContentLoaded",a)})}var N=n().getLogger("torus-embed"),O={errors:{disconnected:()=>"Torus: Lost connection to Torus.",permanentlyDisconnected:()=>"Torus: Disconnected from iframe. Page reload required.",sendSiteMetadata:()=>"Torus: Failed to send site metadata. This is an internal error, please report this bug.",unsupportedSync:a=>`Torus: The Torus Ethereum provider does not support synchronous methods like ${a} without a callback parameter.`,invalidDuplexStream:()=>"Must provide a Node.js-style duplex stream.",invalidOptions:(a,b)=>`Invalid options. Received: { maxEventListeners: ${a}, shouldSendMetadata: ${b} }`,invalidRequestArgs:()=>"Expected a single, non-array, object argument.",invalidRequestMethod:()=>"'args.method' must be a non-empty string.",invalidRequestParams:()=>"'args.params' must be an object or array if provided.",invalidLoggerObject:()=>"'args.logger' must be an object if provided.",invalidLoggerMethod:a=>`'args.logger' must include required method '${a}'.`},info:{connected:a=>`Torus: Connected to chain with ID "${a}".`},warnings:{enableDeprecation:'Torus: ""ethereum.enable()" is deprecated and may be removed in the future. Please use "ethereum.send("eth_requestAccounts")" instead. For more information, see: https://eips.ethereum.org/EIPS/eip-1102',sendDeprecation:'Torus: "ethereum.send(...)" is deprecated and may be removed in the future. Please use "ethereum.sendAsync(...)" or "ethereum.request(...)" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',events:{close:'Torus: The event "close" is deprecated and may be removed in the future. Please use "disconnect" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',data:'Torus: The event "data" is deprecated and will be removed in the future.Use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193#message',networkChanged:'Torus: The event "networkChanged" is deprecated and may be removed in the future. Please use "chainChanged" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193',notification:'Torus: The event "notification" is deprecated and may be removed in the future. Please use "message" instead.\nFor more information, see: https://eips.ethereum.org/EIPS/eip-1193'},publicConfigStore:'Torus: The property "publicConfigStore" is deprecated and WILL be removed in the future.'}};const{paymentProviders:P}=r,Q=(d,h)=>{const a={};if(!d)return{errors:a,isValid:!0};if(d&&!P[d])return a.provider="Invalid Provider",{errors:a,isValid:0===Object.keys(a).length};const e=P[d],c=h||{};if(c.fiatValue){const f=+parseFloat(c.fiatValue.toString())||0;f<e.minOrderValue&&(a.fiatValue="Requested amount is lower than supported"),f>e.maxOrderValue&&e.enforceMax&&(a.fiatValue="Requested amount is higher than supported")}if(c.selectedCurrency&&!e.validCurrencies.includes(c.selectedCurrency)&&(a.selectedCurrency="Unsupported currency"),c.selectedCryptoCurrency){const g=Object.values(e.validCryptoCurrenciesByChain).flat().map(a=>a.value),i=d===b.MOONPAY?c.selectedCryptoCurrency.toLowerCase():c.selectedCryptoCurrency;g&&!g.includes(i)&&(a.selectedCryptoCurrency="Unsupported cryptoCurrency")}return{errors:a,isValid:0===Object.keys(a).length}};function R(d,a,b){let c=`MetaMask: Lost connection to "${d}".`;null!=a&&a.stack&&(c+=`
${a.stack}`),N.warn(c),b&&b.listenerCount("error")>0&&b.emit("error",c)}const S=()=>Math.random().toString(36).slice(2),T=async(d,e)=>{let a,b;const f="1.36.1";let c=e.version||f;try{if(("binance"===d||"production"===d)&&!e.version){let g;c=(g=r.prodTorusUrl?{data:r.prodTorusUrl}:await (0,v.U2)(`${r.api}/latestversion?name=@toruslabs/torus-embed&version=${f}`,{},{useAPIKey:!0})).data,r.prodTorusUrl=g.data}}catch(h){N.error(h,"unable to fetch latest version")}switch(N.info("version used: ",c),d){case"binance":a=`https://binance.tor.us/v${c}`,b="info";break;case"testing":a="https://testing.tor.us",b="debug";break;case"bnb":a="https://bnb.tor.us",b="error";break;case"polygon":a="https://polygon.tor.us",b="error";break;case"lrc":a="https://lrc.tor.us",b="debug";break;case"beta":a="https://beta.tor.us",b="debug";break;case"development":a="http://localhost:4050",b="debug";break;default:a=`https://app.tor.us/v${c}`,b="error";break}return{torusUrl:a,logLevel:b}},U=()=>{let a=window.navigator.language||"en-US";const b=a.split("-");return a=Object.prototype.hasOwnProperty.call(r.translations,b[0])?b[0]:"en"},V=["eth_subscription"],W=()=>{},X="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=660,width=375",Y="directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=450";function Z(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}h.Ue.defaultMaxListeners=100;const $=function(a,b){let c=!(arguments.length>2)|| void 0===arguments[2]||arguments[2];return(e,d)=>e||d.error?b(e||d.error):!c||Array.isArray(d)?a(d):a(d.result)};class s extends h.Ue{constructor(d){let{maxEventListeners:e=100,shouldSendMetadata:f=!0,jsonRpcStreamName:g="provider"}=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};if(super(),(0,i.Z)(this,"chainId",void 0),(0,i.Z)(this,"selectedAddress",void 0),(0,i.Z)(this,"_rpcEngine",void 0),(0,i.Z)(this,"networkVersion",void 0),(0,i.Z)(this,"shouldSendMetadata",void 0),(0,i.Z)(this,"isTorus",void 0),(0,i.Z)(this,"_publicConfigStore",void 0),(0,i.Z)(this,"tryPreopenHandle",void 0),(0,i.Z)(this,"enable",void 0),(0,i.Z)(this,"_state",void 0),(0,i.Z)(this,"_jsonRpcConnection",void 0),(0,i.Z)(this,"_sentWarnings",{enable:!1,experimentalMethods:!1,send:!1,publicConfigStore:!1,events:{close:!1,data:!1,networkChanged:!1,notification:!1}}),!(0,A.duplex)(d))throw new Error(O.errors.invalidDuplexStream());this.isTorus=!0,this.setMaxListeners(e),this._state=function(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?Z(Object(b),!0).forEach(function(a){(0,i.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):Z(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}({},s._defaultState),this.selectedAddress=null,this.networkVersion=null,this.chainId=null,this.shouldSendMetadata=f,this._handleAccountsChanged=this._handleAccountsChanged.bind(this),this._handleChainChanged=this._handleChainChanged.bind(this),this._handleUnlockStateChanged=this._handleUnlockStateChanged.bind(this),this._handleConnect=this._handleConnect.bind(this),this._handleDisconnect=this._handleDisconnect.bind(this),this._handleStreamDisconnect=this._handleStreamDisconnect.bind(this),this._sendSync=this._sendSync.bind(this),this._rpcRequest=this._rpcRequest.bind(this),this._warnOfDeprecation=this._warnOfDeprecation.bind(this),this._initializeState=this._initializeState.bind(this),this.request=this.request.bind(this),this.send=this.send.bind(this),this.sendAsync=this.sendAsync.bind(this);const a=new h.O4;B()(d,a,d,this._handleStreamDisconnect.bind(this,"MetaMask")),this._publicConfigStore=new x.ObservableStore({storageKey:"Metamask-Config"}),B()(a.createStream("publicConfig"),(0,x.storeAsStream)(this._publicConfigStore),R.bind(this,"MetaMask PublicConfigStore")),a.ignoreStream("phishing"),this.on("connect",()=>{this._state.isConnected=!0});const b=(0,h.AP)();B()(b.stream,a.createStream(g),b.stream,this._handleStreamDisconnect.bind(this,"MetaMask RpcProvider"));const c=new h.eI;c.push((0,h.Rq)()),c.push((a,b,c)=>{"string"==typeof a.method&&a.method||(b.error=y.ethErrors.rpc.invalidRequest({message:"The request 'method' must be a non-empty string.",data:a})),c(c=>{const{error:a}=b;return a&&N.error(`MetaMask - RPC Error: ${a.message}`,a),c()})}),c.push(b.middleware),this._rpcEngine=c,b.events.on("notification",c=>{const{method:b,params:a}=c;"wallet_accountsChanged"===b?this._handleAccountsChanged(a):"wallet_unlockStateChanged"===b?this._handleUnlockStateChanged(a):"wallet_chainChanged"===b?this._handleChainChanged(a):V.includes(c.method)&&(this.emit("data",c),this.emit("notification",a.result),this.emit("message",{type:b,data:a}))})}get publicConfigStore(){return this._sentWarnings.publicConfigStore||(N.warn(O.warnings.publicConfigStore),this._sentWarnings.publicConfigStore=!0),this._publicConfigStore}isConnected(){return this._state.isConnected}async request(a){if(!a||"object"!=typeof a||Array.isArray(a))throw y.ethErrors.rpc.invalidRequest({message:O.errors.invalidRequestArgs(),data:a});const{method:c,params:b}=a;if("string"!=typeof c||0===c.length)throw y.ethErrors.rpc.invalidRequest({message:O.errors.invalidRequestMethod(),data:a});if(void 0!==b&&!Array.isArray(b)&&("object"!=typeof b||null===b))throw y.ethErrors.rpc.invalidRequest({message:O.errors.invalidRequestParams(),data:a});return new Promise((a,d)=>{this._rpcRequest({method:c,params:b},$(a,d))})}sendAsync(a,b){this._rpcRequest(a,b)}addListener(a,b){return this._warnOfDeprecation(a),super.addListener(a,b)}on(a,b){return this._warnOfDeprecation(a),super.on(a,b)}once(a,b){return this._warnOfDeprecation(a),super.once(a,b)}prependListener(a,b){return this._warnOfDeprecation(a),super.prependListener(a,b)}prependOnceListener(a,b){return this._warnOfDeprecation(a),super.prependOnceListener(a,b)}async _initializeState(){try{const{accounts:a,chainId:b,isUnlocked:c,networkVersion:d}=await this.request({method:"wallet_getProviderState"});this.emit("connect",{chainId:b}),this._handleChainChanged({chainId:b,networkVersion:d}),this._handleUnlockStateChanged({accounts:a,isUnlocked:c}),this._handleAccountsChanged(a)}catch(e){N.error("MetaMask: Failed to get initial state. Please report this bug.",e)}finally{N.info("initialized state"),this._state.initialized=!0,this.emit("_initialized")}}_rpcRequest(c,d){let e=arguments.length>2&& void 0!==arguments[2]&&arguments[2],b=d;const a=c;if(!Array.isArray(a)){if(a.jsonrpc||(a.jsonrpc="2.0"),"eth_accounts"===a.method||"eth_requestAccounts"===a.method)b=(c,b)=>{this._handleAccountsChanged(b.result||[],"eth_accounts"===a.method,e),d(c,b)};else if("wallet_getProviderState"===a.method){this._rpcEngine.handle(c,b);return}}this.tryPreopenHandle(a,b)}send(a,b){return(this._sentWarnings.send||(N.warn(O.warnings.sendDeprecation),this._sentWarnings.send=!0),"string"==typeof a&&(!b||Array.isArray(b)))?new Promise((d,c)=>{try{this._rpcRequest({method:a,params:b},$(d,c,!1))}catch(e){c(e)}}):a&&"object"==typeof a&&"function"==typeof b?this._rpcRequest(a,b):this._sendSync(a)}_sendSync(a){let b;switch(a.method){case"eth_accounts":b=this.selectedAddress?[this.selectedAddress]:[];break;case"eth_coinbase":b=this.selectedAddress||null;break;case"eth_uninstallFilter":this._rpcRequest(a,W),b=!0;break;case"net_version":b=this.networkVersion||null;break;default:throw new Error(O.errors.unsupportedSync(a.method))}return{id:a.id,jsonrpc:a.jsonrpc,result:b}}_handleConnect(a){this._state.isConnected||(this._state.isConnected=!0,this.emit("connect",{chainId:a}),N.debug(O.info.connected(a)))}_handleDisconnect(b,c){if(this._state.isConnected|| !this._state.isPermanentlyDisconnected&&!b){this._state.isConnected=!1;let a;b?(a=new y.EthereumRpcError(1013,c||O.errors.disconnected()),N.debug(a)):(a=new y.EthereumRpcError(1011,c||O.errors.permanentlyDisconnected()),N.error(a),this.chainId=null,this._state.accounts=null,this.selectedAddress=null,this._state.isUnlocked=!1,this._state.isPermanentlyDisconnected=!0),this.emit("disconnect",a)}}_handleStreamDisconnect(b,a){R(b,a,this),this._handleDisconnect(!1,a?a.message:void 0)}_handleAccountsChanged(b){let c=arguments.length>1&& void 0!==arguments[1]&&arguments[1],d=arguments.length>2&& void 0!==arguments[2]&&arguments[2],a=b;for(const e of(Array.isArray(a)||(N.error("MetaMask: Received non-array accounts parameter. Please report this bug.",a),a=[]),b))if("string"!=typeof e){N.error("MetaMask: Received non-string account. Please report this bug.",b),a=[];break}z()(this._state.accounts,a)||(c&&Array.isArray(this._state.accounts)&&this._state.accounts.length>0&&!d&&N.error('MetaMask: "eth_accounts" unexpectedly updated accounts. Please report this bug.',a),this._state.accounts=a,this.emit("accountsChanged",a)),this.selectedAddress!==a[0]&&(this.selectedAddress=a[0]||null)}_handleChainChanged(){let{chainId:a,networkVersion:b}=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};if(!a||!b){N.error("MetaMask: Received invalid network parameters. Please report this bug.",{chainId:a,networkVersion:b});return}"loading"===b?this._handleDisconnect(!0):(this._handleConnect(a),a!==this.chainId&&(this.chainId=a,this._state.initialized&&this.emit("chainChanged",this.chainId)))}_handleUnlockStateChanged(){let{accounts:b,isUnlocked:a}=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};if("boolean"!=typeof a){N.error("MetaMask: Received invalid isUnlocked parameter. Please report this bug.",{isUnlocked:a});return}a!==this._state.isUnlocked&&(this._state.isUnlocked=a,this._handleAccountsChanged(b||[]))}_warnOfDeprecation(a){!1===this._sentWarnings.events[a]&&(N.warn(O.warnings.events[a]),this._sentWarnings.events[a]=!0)}}(0,i.Z)(s,"_defaultState",{accounts:null,isConnected:!1,isUnlocked:!1,initialized:!1,isPermanentlyDisconnected:!1,hasEmittedConnection:!1});const _=a=>({algorithms:a.algorithms||["sha256"],delimiter:a.delimiter||" ",full:a.full||!1}),aa=(a,c)=>{const b={};return a.algorithms.forEach(a=>{b[a]=C()(a).update(c,"utf8").digest("base64")}),b},ab=(a,b)=>{let c="";return c+=Object.keys(b.hashes).map(a=>`${a}-${b.hashes[a]}`).join(a.delimiter)},ac=(c,d)=>{const b=_(c),a={hashes:aa(b,d),integrity:void 0};return a.integrity=ab(b,a),b.full?a:a.integrity};class ad extends p.EventEmitter{constructor(a){let{url:b,target:c,features:d}=a;super(),(0,i.Z)(this,"url",void 0),(0,i.Z)(this,"target",void 0),(0,i.Z)(this,"features",void 0),(0,i.Z)(this,"window",void 0),(0,i.Z)(this,"windowTimer",void 0),(0,i.Z)(this,"iClosedWindow",void 0),this.url=b,this.target=c||"_blank",this.features=d||function(){const a=void 0!==window.screenLeft?window.screenLeft:window.screenX,b=void 0!==window.screenTop?window.screenTop:window.screenY,c=window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:window.screen.width,d=window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:window.screen.height,e=`titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=700,width=1200,top=${Math.abs((d-700)/2/1+b)},left=${Math.abs((c-1200)/2/1+a)}`;return e}(),this.window=void 0,this.windowTimer=void 0,this.iClosedWindow=!1,this._setupTimer()}_setupTimer(){this.windowTimer=Number(setInterval(()=>{this.window&&this.window.closed&&(clearInterval(this.windowTimer),this.iClosedWindow||this.emit("close"),this.iClosedWindow=!1,this.window=void 0),void 0===this.window&&clearInterval(this.windowTimer)},500))}open(){var a;return this.window=window.open(this.url.href,this.target,this.features),null!==(a=this.window)&& void 0!==a&&a.focus&&this.window.focus(),Promise.resolve()}close(){this.iClosedWindow=!0,this.window&&this.window.close()}redirect(a){a?window.location.replace(this.url.href):window.location.href=this.url.href}}function ae(a){return new Promise((e,c)=>{try{const b=document.createElement("img");b.onload=()=>e(!0),b.onerror=()=>e(!1),b.src=a}catch(d){c(d)}})}const af=b=>{const{document:a}=b,c=a.querySelector('head > meta[property="og:site_name"]');if(c)return c.content;const d=a.querySelector('head > meta[name="title"]');return d?d.content:a.title&&a.title.length>0?a.title:b.location.hostname};async function ag(c){const{document:b}=c;let a=b.querySelector('head > link[rel="shortcut icon"]');return a&&await ae(a.href)?a.href:(a=Array.from(b.querySelectorAll('head > link[rel="icon"]')).find(a=>Boolean(a.href)))&&await ae(a.href)?a.href:null}const ah=async()=>({name:af(window),icon:await ag(window)});async function ai(a){try{const b=await ah();a.handle({jsonrpc:"2.0",id:S(),method:"wallet_sendDomainMetadata",params:b},W)}catch(c){N.error({message:O.errors.sendSiteMetadata(),originalError:c})}}const aj=["host","chainId","networkName"];function ak(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}const al={[f.GOOGLE]:!0,[f.FACEBOOK]:!0,[f.REDDIT]:!0,[f.TWITCH]:!0,[f.DISCORD]:!0},am="sha384-hUCVf4/dRFTMtyB6vphvJ0RhfaCQbcanNY5t1ZWC+MuBiRlt0l1ame3BBMhh+qN/",an=["eth_sendTransaction","eth_signTypedData","eth_signTypedData_v3","eth_signTypedData_v4","personal_sign","eth_getEncryptionPublicKey","eth_decrypt"];!async function(){try{if("undefined"==typeof document)return;const a=document.createElement("link"),{torusUrl:b}=await T("production",{check:!1,hash:am,version:""});a.href=`${b}/popup`,a.crossOrigin="anonymous",a.type="text/html",a.rel="prefetch",a.relList&&a.relList.supports&&a.relList.supports("prefetch")&&document.head.appendChild(a)}catch(c){N.warn(c)}}();class ao{constructor(){let{buttonPosition:c=F.BOTTOM_LEFT,buttonSize:d=56,modalZIndex:a=99999,apiKey:b="torus-default"}=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};(0,i.Z)(this,"buttonPosition",F.BOTTOM_LEFT),(0,i.Z)(this,"buttonSize",void 0),(0,i.Z)(this,"torusUrl",void 0),(0,i.Z)(this,"torusIframe",void 0),(0,i.Z)(this,"styleLink",void 0),(0,i.Z)(this,"isLoggedIn",void 0),(0,i.Z)(this,"isInitialized",void 0),(0,i.Z)(this,"torusWidgetVisibility",void 0),(0,i.Z)(this,"torusAlert",void 0),(0,i.Z)(this,"apiKey",void 0),(0,i.Z)(this,"modalZIndex",void 0),(0,i.Z)(this,"alertZIndex",void 0),(0,i.Z)(this,"torusAlertContainer",void 0),(0,i.Z)(this,"isIframeFullScreen",void 0),(0,i.Z)(this,"whiteLabel",void 0),(0,i.Z)(this,"requestedVerifier",void 0),(0,i.Z)(this,"currentVerifier",void 0),(0,i.Z)(this,"embedTranslations",void 0),(0,i.Z)(this,"ethereum",void 0),(0,i.Z)(this,"provider",void 0),(0,i.Z)(this,"communicationMux",void 0),(0,i.Z)(this,"isLoginCallback",void 0),(0,i.Z)(this,"paymentProviders",r.paymentProviders),(0,i.Z)(this,"loginHint",""),(0,i.Z)(this,"useWalletConnect",void 0),(0,i.Z)(this,"isCustomLogin",!1),this.buttonPosition=c,this.buttonSize=d,this.torusUrl="",this.isLoggedIn=!1,this.isInitialized=!1,this.torusWidgetVisibility=!0,this.requestedVerifier="",this.currentVerifier="",this.apiKey=b,(0,v.ut)(b),this.modalZIndex=a,this.alertZIndex=a+1e3,this.isIframeFullScreen=!1}async init(){let{buildEnv:g="production",enableLogging:l=!1,enabledVerifiers:v=al,network:x={host:"mainnet",chainId:null,networkName:"",blockExplorer:"",ticker:"",tickerName:""},loginConfig:h={},showTorusButton:m=!0,integrity:d={check:!1,hash:am,version:""},whiteLabel:e,skipTKey:y=!1,useWalletConnect:i=!1,mfaLevel:z="default"}=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};if(this.isInitialized)throw new Error("Already initialized");const{torusUrl:a,logLevel:n}=await T(g,d);N.info(a,"url loaded"),this.torusUrl=a,this.whiteLabel=e,this.useWalletConnect=i,this.isCustomLogin=!!(h&&Object.keys(h).length>0)||!!(e&&Object.keys(e).length>0),N.setDefaultLevel(n),l?N.enableAll():N.disableAll(),this.torusWidgetVisibility=m;const b=new URL(a);b.pathname.endsWith("/")?b.pathname+="popup":b.pathname+="/popup",b.hash=`#isCustomLogin=${this.isCustomLogin}`,this.torusIframe=J(`<iframe
        id="torusIframe"
        allow=${i?"camera":""}
        class="torusIframe"
        src="${b.href}"
        style="display: none; position: fixed; top: 0; right: 0; width: 100%;
        height: 100%; border: none; border-radius: 0; z-index: ${this.modalZIndex}"
      ></iframe>`),this.torusAlertContainer=J('<div id="torusAlertContainer"></div>'),this.torusAlertContainer.style.display="none",this.torusAlertContainer.style.setProperty("z-index",this.alertZIndex.toString());const c=window.document.createElement("link");c.setAttribute("rel","stylesheet"),c.setAttribute("type","text/css"),c.setAttribute("href",`${a}/css/widget.css`),this.styleLink=c;const{defaultLanguage:o=U(),customTranslations:p={}}=this.whiteLabel||{},q=w()(r.translations,p),s=q[o]||r.translations[U()];this.embedTranslations=s.embed;const j=async()=>(await M(),new Promise((a,b)=>{this.torusIframe.onload=async()=>{this._setupWeb3();const c=this.communicationMux.getStream("init_stream");c.on("data",d=>{const{name:e,data:f,error:c}=d;"init_complete"===e&&f.success?(this.isInitialized=!0,this._displayIframe(this.isIframeFullScreen),a(void 0)):c&&b(new Error(c))}),c.write({name:"init_stream",data:{enabledVerifiers:v,loginConfig:h,whiteLabel:this.whiteLabel,buttonPosition:this.buttonPosition,buttonSize:this.buttonSize,torusWidgetVisibility:this.torusWidgetVisibility,apiKey:this.apiKey,skipTKey:y,network:x,mfaLevel:z}})},window.document.head.appendChild(this.styleLink),window.document.body.appendChild(this.torusIframe),window.document.body.appendChild(this.torusAlertContainer)}));if("production"===g&&d.check){const t=`${a}/popup`,f=await fetch(t,{cache:"reload"});if("max-age=3600"!==f.headers.get("Cache-Control"))throw new Error(`Unexpected Cache-Control headers, got ${f.headers.get("Cache-Control")}`);const u=await f.text(),k=ac({algorithms:["sha384"]},u);if(N.info(k,"integrity"),k===d.hash)await j();else throw this.clearInit(),new Error("Integrity check failed")}else await j()}login(){let{verifier:a="",login_hint:b=""}=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};if(!this.isInitialized)throw new Error("Call init() first");return this.requestedVerifier=a,this.loginHint=b,this.ethereum.enable()}logout(){return new Promise((d,a)=>{if(!this.isLoggedIn){a(new Error("User has not logged in yet"));return}const b=this.communicationMux.getStream("logout");b.write({name:"logOut"});const c=this.communicationMux.getStream("status");L(c,"data",b=>{b.loggedIn?a(new Error("Some Error Occured")):(this.isLoggedIn=!1,this.currentVerifier="",this.requestedVerifier="",d())})})}async cleanUp(){this.isLoggedIn&&await this.logout(),this.clearInit()}clearInit(){function a(a){return a instanceof Element||a instanceof HTMLDocument}a(this.styleLink)&&window.document.body.contains(this.styleLink)&&(this.styleLink.remove(),this.styleLink=void 0),a(this.torusIframe)&&window.document.body.contains(this.torusIframe)&&(this.torusIframe.remove(),this.torusIframe=void 0),a(this.torusAlertContainer)&&window.document.body.contains(this.torusAlertContainer)&&(this.torusAlert=void 0,this.torusAlertContainer.remove(),this.torusAlertContainer=void 0),this.isInitialized=!1}hideTorusButton(){this.torusWidgetVisibility=!1,this._sendWidgetVisibilityStatus(!1),this._displayIframe()}showTorusButton(){this.torusWidgetVisibility=!0,this._sendWidgetVisibilityStatus(!0),this._displayIframe()}setProvider(a){let{host:b="mainnet",chainId:c=null,networkName:d=""}=a,e=function(a,d){if(null==a)return{};var b,c,e=function(c,f){if(null==c)return{};var a,b,d={},e=Object.keys(c);for(b=0;b<e.length;b++)a=e[b],f.indexOf(a)>=0||(d[a]=c[a]);return d}(a,d);if(Object.getOwnPropertySymbols){var f=Object.getOwnPropertySymbols(a);for(c=0;c<f.length;c++)b=f[c],!(d.indexOf(b)>=0)&&Object.prototype.propertyIsEnumerable.call(a,b)&&(e[b]=a[b])}return e}(a,aj);return new Promise((g,h)=>{const a=this.communicationMux.getStream("provider_change");L(a,"data",a=>{const{err:b,success:c}=a.data;N.info(a),b?h(b):c?g():h(new Error("some error occured"))});const f=S();this._handleWindow(f,{target:"_blank",features:X}),a.write({name:"show_provider_change",data:{network:function(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?ak(Object(b),!0).forEach(function(a){(0,i.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):ak(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}({host:b,chainId:c,networkName:d},e),preopenInstanceId:f,override:!1}})})}showWallet(a){let d=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};const b=this.communicationMux.getStream("show_wallet"),c=a?`/${a}`:"";b.write({name:"show_wallet",data:{path:c}}),L(b,"data",b=>{if("show_wallet_instance"===b.name){const{instanceId:e}=b.data,a=new URL(`${this.torusUrl}/wallet${c}`);a.searchParams.append("integrity","true"),a.searchParams.append("instanceId",e),Object.keys(d).forEach(b=>{a.searchParams.append(b,d[b])}),a.hash=`#isCustomLogin=${this.isCustomLogin}`;const f=new ad({url:a,features:"directories=0,titlebar=0,toolbar=0,status=0,location=0,menubar=0,height=740,width=1315"});f.open()}})}async getPublicAddress(c){let{verifier:b,verifierId:d,isExtended:e=!1}=c;if(!r.supportedVerifierList.includes(b)||!E[b])throw new Error("Unsupported verifier");const f=E[b],a=new URL("https://api.tor.us/lookup/torus");return a.searchParams.append("verifier",f),a.searchParams.append("verifierId",d),a.searchParams.append("walletVerifier",b),a.searchParams.append("network","mainnet"),a.searchParams.append("isExtended",e.toString()),(0,v.U2)(a.href,{headers:{"Content-Type":"application/json; charset=utf-8"}},{useAPIKey:!0})}getUserInfo(a){return new Promise((e,c)=>{if(this.isLoggedIn){const b=this.communicationMux.getStream("user_info_access");b.write({name:"user_info_access_request"});const d=f=>{const{name:g,data:{approved:h,payload:i,rejected:j,newRequest:k}}=f;if("user_info_access_response"===g){if(h)e(i);else if(j)c(new Error("User rejected the request"));else if(k){const b=this.communicationMux.getStream("user_info"),l=a=>{"user_info_response"===a.name&&(a.data.approved?e(a.data.payload):c(new Error("User rejected the request")))};L(b,"data",l);const d=S();this._handleWindow(d,{target:"_blank",features:X}),b.write({name:"user_info_request",data:{message:a,preopenInstanceId:d}})}}};L(b,"data",d)}else c(new Error("User has not logged in yet"))})}initiateTopup(a,b){return new Promise((i,c)=>{if(this.isInitialized){const{errors:f,isValid:g}=Q(a,b);if(!g){c(new Error(JSON.stringify(f)));return}const d=this.communicationMux.getStream("topup"),h=a=>{"topup_response"===a.name&&(a.data.success?i(a.data.success):c(new Error(a.data.error)))};L(d,"data",h);const e=S();this._handleWindow(e),d.write({name:"topup_request",data:{provider:a,params:b,preopenInstanceId:e}})}else c(new Error("Torus is not initialized yet"))})}async loginWithPrivateKey(a){const{privateKey:b,userInfo:c}=a;return new Promise((f,a)=>{if(this.isInitialized){if(32!==D.from(b,"hex").length){a(new Error("Invalid private key, Please provide a 32 byte valid secp25k1 private key"));return}const d=this.communicationMux.getStream("login_with_private_key"),e=b=>{"login_with_private_key_response"===b.name&&(b.data.success?f(b.data.success):a(new Error(b.data.error)))};L(d,"data",e),d.write({name:"login_with_private_key_request",data:{privateKey:b,userInfo:c}})}else a(new Error("Torus is not initialized yet"))})}async showWalletConnectScanner(){if(!this.useWalletConnect)throw new Error("Set `useWalletConnect` as true in init function options to use wallet connect scanner");return new Promise((d,b)=>{if(this.isLoggedIn){const a=this.communicationMux.getStream("wallet_connect_stream"),c=a=>{"wallet_connect_stream_res"===a.name&&(a.data.success?d(a.data.success):b(new Error(a.data.error)),this._displayIframe())};L(a,"data",c),a.write({name:"wallet_connect_stream_req"}),this._displayIframe(!0)}else b(new Error("User has not logged in yet"))})}_handleWindow(b){let{url:e,target:f,features:g}=arguments.length>1&& void 0!==arguments[1]?arguments[1]:{};if(b){const d=this.communicationMux.getStream("window"),a=new URL(e||`${this.torusUrl}/redirect?preopenInstanceId=${b}`);a.hash?a.hash+=`&isCustomLogin=${this.isCustomLogin}`:a.hash=`#isCustomLogin=${this.isCustomLogin}`;const c=new ad({url:a,target:f,features:g});if(c.open(),!c.window){this._createPopupBlockAlert(b,a.href);return}d.write({name:"opened_window",data:{preopenInstanceId:b}});const h=a=>{let{preopenInstanceId:e,close:f}=a;e===b&&f&&(c.close(),d.removeListener("data",h))};d.on("data",h),c.once("close",()=>{d.write({data:{preopenInstanceId:b,closed:!0}}),d.removeListener("data",h)})}}_setEmbedWhiteLabel(b){const{theme:c}=this.whiteLabel||{};if(c){const{isDark:d=!1,colors:a={}}=c;d&&b.classList.add("torus-dark"),a.torusBrand1&&b.style.setProperty("--torus-brand-1",a.torusBrand1),a.torusGray2&&b.style.setProperty("--torus-gray-2",a.torusGray2)}}_getLogoUrl(){var a,b,c,d;let e=`${this.torusUrl}/images/torus_icon-blue.svg`;return e=null!==(a=this.whiteLabel)&& void 0!==a&&null!==(b=a.theme)&& void 0!==b&&b.isDark?(null===(c=this.whiteLabel)|| void 0===c?void 0:c.logoLight)||e:(null===(d=this.whiteLabel)|| void 0===d?void 0:d.logoDark)||e}_sendWidgetVisibilityStatus(a){const b=this.communicationMux.getStream("torus-widget-visibility");b.write({data:a})}_displayIframe(){let b=arguments.length>0&& void 0!==arguments[0]&&arguments[0];const a={},c=this.buttonSize+14;if(b)a.display="block",a.width="100%",a.height="100%",a.top="0px",a.right="0px",a.left="0px",a.bottom="0px";else switch(a.display=this.torusWidgetVisibility?"block":"none",a.height=`${c}px`,a.width=`${c}px`,this.buttonPosition){case F.TOP_LEFT:a.top="0px",a.left="0px",a.right="auto",a.bottom="auto";break;case F.TOP_RIGHT:a.top="0px",a.right="0px",a.left="auto",a.bottom="auto";break;case F.BOTTOM_RIGHT:a.bottom="0px",a.right="0px",a.top="auto",a.left="auto";break;case F.BOTTOM_LEFT:default:a.bottom="0px",a.left="0px",a.top="auto",a.right="auto";break}Object.assign(this.torusIframe.style,a),this.isIframeFullScreen=b}_setupWeb3(){N.info("setupWeb3 running");const e=new h.XR({name:"embed_metamask",target:"iframe_metamask",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),f=new h.XR({name:"embed_comm",target:"iframe_comm",targetWindow:this.torusIframe.contentWindow,targetOrigin:new URL(this.torusUrl).origin}),a=new s(e),c=b=>{const c=a[b];a[b]=function(d){if(d&&"eth_requestAccounts"===d)return a.enable();for(var e=arguments.length,f=new Array(e>1?e-1:0),b=1;b<e;b++)f[b-1]=arguments[b];return c.apply(this,[d,...f])}};c("send"),c("sendAsync"),a.enable=()=>new Promise((b,c)=>{a.sendAsync({jsonrpc:"2.0",id:S(),method:"eth_requestAccounts",params:[]},(e,f)=>{const{result:a}=f||{};if(e)setTimeout(()=>{c(e)},50);else if(Array.isArray(a)&&a.length>0){const d=()=>{if(""!==this.requestedVerifier&&this.currentVerifier!==this.requestedVerifier){const{requestedVerifier:d}=this;this.logout().then(a=>{this.requestedVerifier=d,this._showLoginPopup(!0,b,c)}).catch(a=>c(a))}else b(a)};this.isLoggedIn?d():this.isLoginCallback=d}else this._showLoginPopup(!0,b,c)})}),a.tryPreopenHandle=(d,e)=>{const b=d;if(!Array.isArray(b)&&an.includes(b.method)){const c=S();this._handleWindow(c,{target:"_blank",features:Y}),b.preopenInstanceId=c}a._rpcEngine.handle(b,e)};const d=new Proxy(a,{deleteProperty:()=>!0});this.ethereum=d;const b=(0,h.V2)(f);this.communicationMux=b;const g=b.getStream("window");g.on("data",a=>{"create_window"===a.name&&this._createPopupBlockAlert(a.data.preopenInstanceId,a.data.url)});const i=b.getStream("widget");i.on("data",a=>{const{data:b}=a;this._displayIframe(b)});const j=b.getStream("status");j.on("data",a=>{a.loggedIn?(this.isLoggedIn=a.loggedIn,this.currentVerifier=a.verifier):this._displayIframe(),this.isLoginCallback&&(this.isLoginCallback(),delete this.isLoginCallback)}),this.provider=d,this.provider.shouldSendMetadata&&ai(this.provider._rpcEngine),a._initializeState(),N.debug("Torus - injected provider")}_showLoginPopup(b,e,f){const c=b=>{const{err:a,selectedAddress:c}=b;a?(N.error(a),f&&f(a)):e&&e([c]),this.isIframeFullScreen&&this._displayIframe()},a=this.communicationMux.getStream("oauth");if(this.requestedVerifier){L(a,"data",c);const d=S();this._handleWindow(d),a.write({name:"oauth",data:{calledFromEmbed:b,verifier:this.requestedVerifier,preopenInstanceId:d,login_hint:this.loginHint}})}else this._displayIframe(!0),L(a,"data",c),a.write({name:"oauth_modal",data:{calledFromEmbed:b}})}_createPopupBlockAlert(e,f){const c=this._getLogoUrl(),a=J(`<div id="torusAlert" class="torus-alert--v2"><div id="torusAlert__logo"><img src="${c}" /></div><div><h1 id="torusAlert__title">${this.embedTranslations.actionRequired}</h1><p id="torusAlert__desc">${this.embedTranslations.pendingAction}</p></div></div>`),d=J(`<div><a id="torusAlert__btn">${this.embedTranslations.continue}</a></div>`),b=J('<div id="torusAlert__btn-container"></div>');b.appendChild(d),a.appendChild(b),this._setEmbedWhiteLabel(a),I(()=>{this.torusAlertContainer.style.display="block",this.torusAlertContainer.appendChild(a)}),I(()=>{d.addEventListener("click",()=>{this._handleWindow(e,{url:f,target:"_blank",features:Y}),a.remove(),0===this.torusAlertContainer.children.length&&(this.torusAlertContainer.style.display="none")})})}}var ap=a(45624),t=a(35796);function aq(c,d){var a=Object.keys(c);if(Object.getOwnPropertySymbols){var b=Object.getOwnPropertySymbols(c);d&&(b=b.filter(function(a){return Object.getOwnPropertyDescriptor(c,a).enumerable})),a.push.apply(a,b)}return a}function ar(c){for(var a=1;a<arguments.length;a++){var b=null!=arguments[a]?arguments[a]:{};a%2?aq(Object(b),!0).forEach(function(a){(0,i.Z)(c,a,b[a])}):Object.getOwnPropertyDescriptors?Object.defineProperties(c,Object.getOwnPropertyDescriptors(b)):aq(Object(b)).forEach(function(a){Object.defineProperty(c,a,Object.getOwnPropertyDescriptor(b,a))})}return c}class as extends t.d{constructor(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{};super(),(0,i.Z)(this,"name",ap.rW.TORUS_EVM),(0,i.Z)(this,"adapterNamespace",ap.yk.EIP155),(0,i.Z)(this,"currentChainNamespace",ap.EN.EIP155),(0,i.Z)(this,"type",ap.hN.EXTERNAL),(0,i.Z)(this,"status",ap.MP.NOT_READY),(0,i.Z)(this,"torusInstance",null),(0,i.Z)(this,"torusWalletOptions",void 0),(0,i.Z)(this,"initParams",void 0),(0,i.Z)(this,"loginSettings",{}),(0,i.Z)(this,"rehydrated",!1),this.torusWalletOptions=a.adapterSettings||{},this.initParams=a.initParams||{},this.loginSettings=a.loginSettings||{},this.chainConfig=a.chainConfig||null,this.sessionTime=a.sessionTime||86400}get provider(){return this.status===ap.MP.CONNECTED&&this.torusInstance?this.torusInstance.provider:null}set provider(a){throw new Error("Not implemented")}async init(c){super.checkInitializationRequirements();let a;if(this.chainConfig){const{chainId:d,blockExplorer:e,displayName:f,rpcTarget:g,ticker:h,tickerName:i}=this.chainConfig;a={chainId:Number.parseInt(d,16),host:g,blockExplorer:e,networkName:f,ticker:h,tickerName:i}}else{this.chainConfig=(0,ap.h2)(ap.EN.EIP155,1);const{blockExplorer:j,displayName:k,chainId:l,ticker:m,tickerName:n}=this.chainConfig;a={chainId:Number.parseInt(l,16),host:"mainnet",blockExplorer:j,networkName:k,ticker:m,tickerName:n}}this.torusInstance=new ao(this.torusWalletOptions),ap.cM.debug("initializing torus evm adapter init"),await this.torusInstance.init(ar(ar({showTorusButton:!1},this.initParams),{},{network:a})),this.status=ap.MP.READY,this.emit(ap.n2.READY,ap.rW.TORUS_EVM);try{ap.cM.debug("initializing torus evm adapter"),c.autoConnect&&(this.rehydrated=!0,await this.connect())}catch(b){ap.cM.error("Failed to connect with torus evm provider",b),this.emit(ap.n2.ERRORED,b)}}async connect(){if(super.checkConnectionRequirements(),!this.torusInstance)throw ap.Ty.notReady("Torus wallet is not initialized");this.status=ap.MP.CONNECTING,this.emit(ap.n2.CONNECTING,{adapter:ap.rW.TORUS_EVM});try{await this.torusInstance.login(this.loginSettings);const{chainId:c}=this.torusInstance.provider;if(c&&parseInt(c)!==parseInt(this.chainConfig.chainId,16)){const{chainId:d,blockExplorer:e,displayName:f,rpcTarget:g,ticker:h,tickerName:i}=this.chainConfig,j={chainId:Number.parseInt(d,16),host:g,blockExplorer:e,networkName:f,tickerName:i,ticker:h};await this.torusInstance.setProvider(ar({},j));const a=await this.torusInstance.ethereum.request({method:"eth_chainId"});if(a&&parseInt(a)!==parseInt(this.chainConfig.chainId,16))throw ap.Ty.fromCode(5e3,"Not connected to correct chainId. Expected: ".concat(this.chainConfig.chainId,", Current: ").concat(a))}return this.status=ap.MP.CONNECTED,this.torusInstance.showTorusButton(),this.emit(ap.MP.CONNECTED,{adapter:ap.rW.TORUS_EVM,reconnected:this.rehydrated}),this.provider}catch(b){throw this.status=ap.MP.READY,this.rehydrated=!1,this.emit(ap.MP.ERRORED,b),b instanceof ap.up?b:ap.RM.connectionError("Failed to login with torus wallet")}}async disconnect(){let a=arguments.length>0&& void 0!==arguments[0]?arguments[0]:{cleanup:!1};if(!this.torusInstance)throw ap.Ty.notReady("Torus wallet is not initialized");await super.disconnect(),await this.torusInstance.logout(),this.torusInstance.hideTorusButton(),a.cleanup?(this.status=ap.MP.NOT_READY,this.torusInstance=null):this.status=ap.MP.READY,this.rehydrated=!1,this.emit(ap.n2.DISCONNECTED)}async getUserInfo(){if(this.status!==ap.MP.CONNECTED)throw ap.RM.notConnectedError("Not connected with wallet");if(!this.torusInstance)throw ap.Ty.notReady("Torus wallet is not initialized");const a=await this.torusInstance.getUserInfo("");return a}setAdapterSettings(a){this.status!==ap.MP.READY&&null!=a&&a.sessionTime&&(this.sessionTime=a.sessionTime)}}},16497:function(e,a,b){function c(a){return null===a}function d(a){return null==a}function f(a){return Object.prototype.toString.call(a)}a.isArray=function(a){return Array.isArray?Array.isArray(a):"[object Array]"===f(a)},a.isBoolean=function(a){return"boolean"==typeof a},a.isNull=c,a.isNullOrUndefined=d,a.isNumber=function(a){return"number"==typeof a},a.isString=function(a){return"string"==typeof a},a.isSymbol=function(a){return"symbol"==typeof a},a.isUndefined=function(a){return void 0===a},a.isRegExp=function(a){return"[object RegExp]"===f(a)},a.isObject=function(a){return"object"==typeof a&&null!==a},a.isDate=function(a){return"[object Date]"===f(a)},a.isError=function(a){return"[object Error]"===f(a)||a instanceof Error},a.isFunction=function(a){return"function"==typeof a},a.isPrimitive=function(a){return null===a||"boolean"==typeof a||"number"==typeof a||"string"==typeof a||"symbol"==typeof a|| void 0===a},a.isBuffer=b(48764).Buffer.isBuffer},64063:function(a){"use strict";a.exports=function c(a,b){if(a===b)return!0;if(a&&b&&"object"==typeof a&&"object"==typeof b){if(a.constructor!==b.constructor)return!1;if(Array.isArray(a)){if((g=a.length)!=b.length)return!1;for(e=g;0!=e--;)if(!c(a[e],b[e]))return!1;return!0}if(a.constructor===RegExp)return a.source===b.source&&a.flags===b.flags;if(a.valueOf!==Object.prototype.valueOf)return a.valueOf()===b.valueOf();if(a.toString!==Object.prototype.toString)return a.toString()===b.toString();if((g=(f=Object.keys(a)).length)!==Object.keys(b).length)return!1;for(e=g;0!=e--;)if(!Object.prototype.hasOwnProperty.call(b,f[e]))return!1;for(e=g;0!=e--;){var g,e,f,d=f[e];if(!c(a[d],b[d]))return!1}return!0}return a!=a&&b!=b}},24970:function(b){"use strict";const a=a=>null!==a&&"object"==typeof a&&"function"==typeof a.pipe;a.writable=b=>a(b)&& !1!==b.writable&&"function"==typeof b._write&&"object"==typeof b._writableState,a.readable=b=>a(b)&& !1!==b.readable&&"function"==typeof b._read&&"object"==typeof b._readableState,a.duplex=b=>a.writable(b)&&a.readable(b),a.transform=b=>a.duplex(b)&&"function"==typeof b._transform,b.exports=a},88212:function(b,d,c){"use strict";var a=c(34155);void 0!==a&&a.version&&0!==a.version.indexOf("v0.")&&(0!==a.version.indexOf("v1.")||0===a.version.indexOf("v1.8."))?b.exports=a:b.exports={nextTick:function(d,f,g,h){if("function"!=typeof d)throw new TypeError('"callback" argument must be a function');var c,b,e=arguments.length;switch(e){case 0:case 1:return a.nextTick(d);case 2:return a.nextTick(function(){d.call(null,f)});case 3:return a.nextTick(function(){d.call(null,f,g)});case 4:return a.nextTick(function(){d.call(null,f,g,h)});default:for(c=new Array(e-1),b=0;b<c.length;)c[b++]=arguments[b];return a.nextTick(function(){d.apply(null,c)})}}}},35940:function(a){var b={}.toString;a.exports=Array.isArray||function(a){return"[object Array]"==b.call(a)}},45867:function(h,k,a){"use strict";var l=a(88212),i=Object.keys||function(b){var a=[];for(var c in b)a.push(c);return a};h.exports=d;var e=Object.create(a(16497));e.inherits=a(35717);var j=a(44278),f=a(10759);e.inherits(d,j);for(var g=i(f.prototype),b=0;b<g.length;b++){var c=g[b];d.prototype[c]||(d.prototype[c]=f.prototype[c])}function d(a){if(!(this instanceof d))return new d(a);j.call(this,a),f.call(this,a),a&& !1===a.readable&&(this.readable=!1),a&& !1===a.writable&&(this.writable=!1),this.allowHalfOpen=!0,a&& !1===a.allowHalfOpen&&(this.allowHalfOpen=!1),this.once("end",m)}function m(){this.allowHalfOpen||this._writableState.ended||l.nextTick(n,this)}function n(a){a.end()}Object.defineProperty(d.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),Object.defineProperty(d.prototype,"destroyed",{get:function(){return void 0!==this._readableState&& void 0!==this._writableState&&this._readableState.destroyed&&this._writableState.destroyed},set:function(a){void 0!==this._readableState&& void 0!==this._writableState&&(this._readableState.destroyed=a,this._writableState.destroyed=a)}}),d.prototype._destroy=function(a,b){this.push(null),this.end(),l.nextTick(b,a)}},3431:function(d,f,a){"use strict";d.exports=c;var e=a(60062),b=Object.create(a(16497));function c(a){if(!(this instanceof c))return new c(a);e.call(this,a)}b.inherits=a(35717),b.inherits(c,e),c.prototype._transform=function(a,c,b){b(null,a)}},44278:function(f,j,b){"use strict";var k,l,m=b(34155),n=b(88212);f.exports=a;var o=b(35940);a.ReadableState=u,b(17187).EventEmitter;var p=function(a,b){return a.listeners(b).length},g=b(84104),q=b(64591).Buffer,r=b.g.Uint8Array||function(){},d=Object.create(b(16497));d.inherits=b(35717);var c=b(66882),h=void 0;h=c&&c.debuglog?c.debuglog("stream"):function(){};var s=b(93912),e=b(55513);d.inherits(a,g);var t=["error","close","destroy","pause","resume"];function u(a,f){a=a||{};var e=f instanceof(k=k||b(45867));this.objectMode=!!a.objectMode,e&&(this.objectMode=this.objectMode||!!a.readableObjectMode);var c=a.highWaterMark,d=a.readableHighWaterMark,g=this.objectMode?16:16384;c||0===c?this.highWaterMark=c:e&&(d||0===d)?this.highWaterMark=d:this.highWaterMark=g,this.highWaterMark=Math.floor(this.highWaterMark),this.buffer=new s,this.length=0,this.pipes=null,this.pipesCount=0,this.flowing=null,this.ended=!1,this.endEmitted=!1,this.reading=!1,this.sync=!0,this.needReadable=!1,this.emittedReadable=!1,this.readableListening=!1,this.resumeScheduled=!1,this.destroyed=!1,this.defaultEncoding=a.defaultEncoding||"utf8",this.awaitDrain=0,this.readingMore=!1,this.decoder=null,this.encoding=null,a.encoding&&(l||(l=b(47989).s),this.decoder=new l(a.encoding),this.encoding=a.encoding)}function a(c){if(k=k||b(45867),!(this instanceof a))return new a(c);this._readableState=new u(c,this),this.readable=!0,c&&("function"==typeof c.read&&(this._read=c.read),"function"==typeof c.destroy&&(this._destroy=c.destroy)),g.call(this)}function v(c,b,g,e,h){var f,d,a=c._readableState;return null===b?(a.reading=!1,A(c,a)):(h||(d=x(a,b)),d)?c.emit("error",d):a.objectMode||b&&b.length>0?("string"==typeof b||a.objectMode||Object.getPrototypeOf(b)===q.prototype||(b=(f=b,q.from(f))),e?a.endEmitted?c.emit("error",new Error("stream.unshift() after end event")):w(c,a,b,!0):a.ended?c.emit("error",new Error("stream.push() after EOF")):(a.reading=!1,a.decoder&&!g?(b=a.decoder.write(b),a.objectMode||0!==b.length?w(c,a,b,!1):D(c,a)):w(c,a,b,!1))):e||(a.reading=!1),y(a)}function w(b,a,c,d){a.flowing&&0===a.length&&!a.sync?(b.emit("data",c),b.read(0)):(a.length+=a.objectMode?1:c.length,d?a.buffer.unshift(c):a.buffer.push(c),a.needReadable&&B(b)),D(b,a)}function x(d,a){var c,b;return b=a,q.isBuffer(b)||b instanceof r||"string"==typeof a|| void 0===a||d.objectMode||(c=new TypeError("Invalid non-string/buffer chunk")),c}function y(a){return!a.ended&&(a.needReadable||a.length<a.highWaterMark||0===a.length)}function z(c,b){if(c<=0||0===b.length&&b.ended)return 0;if(b.objectMode)return 1;if(c!=c)return b.flowing&&b.length?b.buffer.head.data.length:b.length;if(c>b.highWaterMark){var a;b.highWaterMark=((a=c)>=8388608?a=8388608:(a--,a|=a>>>1,a|=a>>>2,a|=a>>>4,a|=a>>>8,a|=a>>>16,a++),a)}return c<=b.length?c:b.ended?b.length:(b.needReadable=!0,0)}function A(c,a){if(!a.ended){if(a.decoder){var b=a.decoder.end();b&&b.length&&(a.buffer.push(b),a.length+=a.objectMode?1:b.length)}a.ended=!0,B(c)}}function B(b){var a=b._readableState;a.needReadable=!1,a.emittedReadable||(h("emitReadable",a.flowing),a.emittedReadable=!0,a.sync?n.nextTick(C,b):C(b))}function C(a){h("emit readable"),a.emit("readable"),H(a)}function D(b,a){a.readingMore||(a.readingMore=!0,n.nextTick(E,b,a))}function E(c,a){for(var b=a.length;!a.reading&&!a.flowing&&!a.ended&&a.length<a.highWaterMark&&(h("maybeReadMore read 0"),c.read(0),b!==a.length);)b=a.length;a.readingMore=!1}function F(a){h("readable nexttick read 0"),a.read(0)}function G(b,a){a.reading||(h("resume read 0"),b.read(0)),a.resumeScheduled=!1,a.awaitDrain=0,b.emit("resume"),H(b),a.flowing&&!a.reading&&b.read(0)}function H(a){var b=a._readableState;for(h("flow",b.flowing);b.flowing&&null!==a.read(););}function i(c,a){var b;return 0===a.length?null:(a.objectMode?b=a.buffer.shift():!c||c>=a.length?(b=a.decoder?a.buffer.join(""):1===a.buffer.length?a.buffer.head.data:a.buffer.concat(a.length),a.buffer.clear()):b=I(c,a.buffer,a.decoder),b)}function I(b,a,d){var c;return b<a.head.data.length?(c=a.head.data.slice(0,b),a.head.data=a.head.data.slice(b)):c=b===a.head.data.length?a.shift():d?J(b,a):K(b,a),c}function J(d,c){var a=c.head,g=1,e=a.data;for(d-=e.length;a=a.next;){var b=a.data,f=d>b.length?b.length:d;if(f===b.length?e+=b:e+=b.slice(0,d),0==(d-=f)){f===b.length?(++g,a.next?c.head=a.next:c.head=c.tail=null):(c.head=a,a.data=b.slice(f));break}++g}return c.length-=g,e}function K(b,c){var e=q.allocUnsafe(b),a=c.head,g=1;for(a.data.copy(e),b-=a.data.length;a=a.next;){var d=a.data,f=b>d.length?d.length:b;if(d.copy(e,e.length-b,0,f),0==(b-=f)){f===d.length?(++g,a.next?c.head=a.next:c.head=c.tail=null):(c.head=a,a.data=d.slice(f));break}++g}return c.length-=g,e}function L(b){var a=b._readableState;if(a.length>0)throw new Error('"endReadable()" called on non-empty stream');a.endEmitted||(a.ended=!0,n.nextTick(M,a,b))}function M(a,b){a.endEmitted||0!==a.length||(a.endEmitted=!0,b.readable=!1,b.emit("end"))}function N(b,c){for(var a=0,d=b.length;a<d;a++)if(b[a]===c)return a;return -1}Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._readableState&&this._readableState.destroyed},set:function(a){this._readableState&&(this._readableState.destroyed=a)}}),a.prototype.destroy=e.destroy,a.prototype._undestroy=e.undestroy,a.prototype._destroy=function(a,b){this.push(null),b(a)},a.prototype.push=function(b,a){var c,d=this._readableState;return d.objectMode?c=!0:"string"==typeof b&&((a=a||d.defaultEncoding)!==d.encoding&&(b=q.from(b,a),a=""),c=!0),v(this,b,a,!1,c)},a.prototype.unshift=function(a){return v(this,a,null,!0,!1)},a.prototype.isPaused=function(){return!1===this._readableState.flowing},a.prototype.setEncoding=function(a){return l||(l=b(47989).s),this._readableState.decoder=new l(a),this._readableState.encoding=a,this},a.prototype.read=function(b){h("read",b),b=parseInt(b,10);var c,a=this._readableState,e=b;if(0!==b&&(a.emittedReadable=!1),0===b&&a.needReadable&&(a.length>=a.highWaterMark||a.ended))return h("read: emitReadable",a.length,a.ended),0===a.length&&a.ended?L(this):B(this),null;if(0===(b=z(b,a))&&a.ended)return 0===a.length&&L(this),null;var d=a.needReadable;return h("need readable",d),(0===a.length||a.length-b<a.highWaterMark)&&h("length less than watermark",d=!0),a.ended||a.reading?h("reading or ended",d=!1):d&&(h("do read"),a.reading=!0,a.sync=!0,0===a.length&&(a.needReadable=!0),this._read(a.highWaterMark),a.sync=!1,a.reading||(b=z(e,a))),null===(c=b>0?i(b,a):null)?(a.needReadable=!0,b=0):a.length-=b,0===a.length&&(a.ended||(a.needReadable=!0),e!==b&&a.ended&&L(this)),null!==c&&this.emit("data",c),c},a.prototype._read=function(a){this.emit("error",new Error("_read() is not implemented"))},a.prototype.pipe=function(a,d){var f,c=this,b=this._readableState;switch(b.pipesCount){case 0:b.pipes=a;break;case 1:b.pipes=[b.pipes,a];break;default:b.pipes.push(a);break}b.pipesCount+=1,h("pipe count=%d opts=%j",b.pipesCount,d);var e=d&& !1===d.end||a===m.stdout||a===m.stderr?v:r;function g(b,a){h("onunpipe"),b===c&&a&& !1===a.hasUnpiped&&(a.hasUnpiped=!0,t())}function r(){h("onend"),a.end()}b.endEmitted?n.nextTick(e):c.once("end",e),a.on("unpipe",g);var i=(f=c,function(){var a=f._readableState;h("pipeOnDrain",a.awaitDrain),a.awaitDrain&&a.awaitDrain--,0===a.awaitDrain&&p(f,"data")&&(a.flowing=!0,H(f))});a.on("drain",i);var s=!1;function t(){h("cleanup"),a.removeListener("close",l),a.removeListener("finish",q),a.removeListener("drain",i),a.removeListener("error",k),a.removeListener("unpipe",g),c.removeListener("end",r),c.removeListener("end",v),c.removeListener("data",j),s=!0,b.awaitDrain&&(!a._writableState||a._writableState.needDrain)&&i()}var u=!1;function j(d){h("ondata"),u=!1,!1!==a.write(d)||u||((1===b.pipesCount&&b.pipes===a||b.pipesCount>1&& -1!==N(b.pipes,a))&&!s&&(h("false write response, pause",c._readableState.awaitDrain),c._readableState.awaitDrain++,u=!0),c.pause())}function k(b){h("onerror",b),v(),a.removeListener("error",k),0===p(a,"error")&&a.emit("error",b)}function l(){a.removeListener("finish",q),v()}function q(){h("onfinish"),a.removeListener("close",l),v()}function v(){h("unpipe"),c.unpipe(a)}return c.on("data",j),function(a,b,c){if("function"==typeof a.prependListener)return a.prependListener(b,c);a._events&&a._events[b]?o(a._events[b])?a._events[b].unshift(c):a._events[b]=[c,a._events[b]]:a.on(b,c)}(a,"error",k),a.once("close",l),a.once("finish",q),a.emit("pipe",c),b.flowing||(h("pipe resume"),c.resume()),a},a.prototype.unpipe=function(b){var a=this._readableState,c={hasUnpiped:!1};if(0===a.pipesCount)return this;if(1===a.pipesCount)return b&&b!==a.pipes||(b||(b=a.pipes),a.pipes=null,a.pipesCount=0,a.flowing=!1,b&&b.emit("unpipe",this,c)),this;if(!b){var f=a.pipes,g=a.pipesCount;a.pipes=null,a.pipesCount=0,a.flowing=!1;for(var d=0;d<g;d++)f[d].emit("unpipe",this,c);return this}var e=N(a.pipes,b);return -1===e||(a.pipes.splice(e,1),a.pipesCount-=1,1===a.pipesCount&&(a.pipes=a.pipes[0]),b.emit("unpipe",this,c)),this},a.prototype.on=function(b,c){var d=g.prototype.on.call(this,b,c);if("data"===b)!1!==this._readableState.flowing&&this.resume();else if("readable"===b){var a=this._readableState;a.endEmitted||a.readableListening||(a.readableListening=a.needReadable=!0,a.emittedReadable=!1,a.reading?a.length&&B(this):n.nextTick(F,this))}return d},a.prototype.addListener=a.prototype.on,a.prototype.resume=function(){var c,a,b=this._readableState;return b.flowing||(h("resume"),b.flowing=!0,c=this,(a=b).resumeScheduled||(a.resumeScheduled=!0,n.nextTick(G,c,a))),this},a.prototype.pause=function(){return h("call pause flowing=%j",this._readableState.flowing),!1!==this._readableState.flowing&&(h("pause"),this._readableState.flowing=!1,this.emit("pause")),this},a.prototype.wrap=function(a){var d=this,e=this._readableState,f=!1;for(var b in a.on("end",function(){if(h("wrapped end"),e.decoder&&!e.ended){var a=e.decoder.end();a&&a.length&&d.push(a)}d.push(null)}),a.on("data",function(b){h("wrapped data"),e.decoder&&(b=e.decoder.write(b)),(!e.objectMode||null!=b)&&(e.objectMode||b&&b.length)&&(d.push(b)||(f=!0,a.pause()))}),a)void 0===this[b]&&"function"==typeof a[b]&&(this[b]=function(b){return function(){return a[b].apply(a,arguments)}}(b));for(var c=0;c<t.length;c++)a.on(t[c],this.emit.bind(this,t[c]));return this._read=function(b){h("wrapped _read",b),f&&(f=!1,a.resume())},this},Object.defineProperty(a.prototype,"readableHighWaterMark",{enumerable:!1,get:function(){return this._readableState.highWaterMark}}),a._fromList=i},60062:function(d,f,b){"use strict";d.exports=a;var e=b(45867),c=Object.create(b(16497));function g(e,c){var b=this._transformState;b.transforming=!1;var d=b.writecb;if(!d)return this.emit("error",new Error("write callback called multiple times"));b.writechunk=null,b.writecb=null,null!=c&&this.push(c),d(e);var a=this._readableState;a.reading=!1,(a.needReadable||a.length<a.highWaterMark)&&this._read(a.highWaterMark)}function a(b){if(!(this instanceof a))return new a(b);e.call(this,b),this._transformState={afterTransform:g.bind(this),needTransform:!1,transforming:!1,writecb:null,writechunk:null,writeencoding:null},this._readableState.needReadable=!0,this._readableState.sync=!1,b&&("function"==typeof b.transform&&(this._transform=b.transform),"function"==typeof b.flush&&(this._flush=b.flush)),this.on("prefinish",h)}function h(){var a=this;"function"==typeof this._flush?this._flush(function(b,c){i(a,b,c)}):i(this,null,null)}function i(a,b,c){if(b)return a.emit("error",b);if(null!=c&&a.push(c),a._writableState.length)throw new Error("Calling transform done when ws.length != 0");if(a._transformState.transforming)throw new Error("Calling transform done when still transforming");return a.push(null)}c.inherits=b(35717),c.inherits(a,e),a.prototype.push=function(a,b){return this._transformState.needTransform=!1,e.prototype.push.call(this,a,b)},a.prototype._transform=function(a,b,c){throw new Error("_transform() is not implemented")},a.prototype._write=function(c,d,e){var a=this._transformState;if(a.writecb=e,a.writechunk=c,a.writeencoding=d,!a.transforming){var b=this._readableState;(a.needTransform||b.needReadable||b.length<b.highWaterMark)&&this._read(b.highWaterMark)}},a.prototype._read=function(b){var a=this._transformState;null!==a.writechunk&&a.writecb&&!a.transforming?(a.transforming=!0,this._transform(a.writechunk,a.writeencoding,a.afterTransform)):a.needTransform=!0},a.prototype._destroy=function(a,b){var c=this;e.prototype._destroy.call(this,a,function(a){b(a),c.emit("close")})}},10759:function(f,j,b){"use strict";var k,c,g=b(88212);function l(a){var b=this;this.next=null,this.entry=null,this.finish=function(){z(b,a)}}f.exports=a;var m=g.nextTick;a.WritableState=i;var d=Object.create(b(16497));d.inherits=b(35717);var n={deprecate:b(94927)},h=b(84104),o=b(64591).Buffer,p=b.g.Uint8Array||function(){},e=b(55513);function q(){}function i(a,f){a=a||{};var e=f instanceof(k=k||b(45867));this.objectMode=!!a.objectMode,e&&(this.objectMode=this.objectMode||!!a.writableObjectMode);var c=a.highWaterMark,d=a.writableHighWaterMark,g=this.objectMode?16:16384;c||0===c?this.highWaterMark=c:e&&(d||0===d)?this.highWaterMark=d:this.highWaterMark=g,this.highWaterMark=Math.floor(this.highWaterMark),this.finalCalled=!1,this.needDrain=!1,this.ending=!1,this.ended=!1,this.finished=!1,this.destroyed=!1;var h=!1===a.decodeStrings;this.decodeStrings=!h,this.defaultEncoding=a.defaultEncoding||"utf8",this.length=0,this.writing=!1,this.corked=0,this.sync=!0,this.bufferProcessing=!1,this.onwrite=function(a){s(f,a)},this.writecb=null,this.writelen=0,this.bufferedRequest=null,this.lastBufferedRequest=null,this.pendingcb=0,this.prefinished=!1,this.errorEmitted=!1,this.bufferedRequestCount=0,this.corkedRequestsFree=new l(this)}function a(d){if(k=k||b(45867),!c.call(a,this)&&!(this instanceof k))return new a(d);this._writableState=new i(d,this),this.writable=!0,d&&("function"==typeof d.write&&(this._write=d.write),"function"==typeof d.writev&&(this._writev=d.writev),"function"==typeof d.destroy&&(this._destroy=d.destroy),"function"==typeof d.final&&(this._final=d.final)),h.call(this)}function r(b,a,d,e,c,f,g){a.writelen=e,a.writecb=g,a.writing=!0,a.sync=!0,d?b._writev(c,a.onwrite):b._write(c,f,a.onwrite),a.sync=!1}function s(c,k){var b,f,l,d,h,e,a=c._writableState,n=a.sync,i=a.writecb;if((e=a).writing=!1,e.writecb=null,e.length-=e.writelen,e.writelen=0,k)b=c,f=a,l=n,d=k,h=i,--f.pendingcb,l?(g.nextTick(h,d),g.nextTick(y,b,f),b._writableState.errorEmitted=!0,b.emit("error",d)):(h(d),b._writableState.errorEmitted=!0,b.emit("error",d),y(b,f));else{var j=w(a);j||a.corked||a.bufferProcessing||!a.bufferedRequest||v(c,a),n?m(t,c,a,j,i):t(c,a,j,i)}}function t(b,a,c,d){c||u(b,a),a.pendingcb--,d(),y(b,a)}function u(b,a){0===a.length&&a.needDrain&&(a.needDrain=!1,b.emit("drain"))}function v(d,a){a.bufferProcessing=!0;var b=a.bufferedRequest;if(d._writev&&b&&b.next){var i=a.bufferedRequestCount,e=new Array(i),c=a.corkedRequestsFree;c.entry=b;for(var f=0,g=!0;b;)e[f]=b,b.isBuf||(g=!1),b=b.next,f+=1;e.allBuffers=g,r(d,a,!0,a.length,e,"",c.finish),a.pendingcb++,a.lastBufferedRequest=null,c.next?(a.corkedRequestsFree=c.next,c.next=null):a.corkedRequestsFree=new l(a),a.bufferedRequestCount=0}else{for(;b;){var h=b.chunk,j=b.encoding,k=b.callback,m=a.objectMode?1:h.length;if(r(d,a,!1,m,h,j,k),b=b.next,a.bufferedRequestCount--,a.writing)break}null===b&&(a.lastBufferedRequest=null)}a.bufferedRequest=b,a.bufferProcessing=!1}function w(a){return a.ending&&0===a.length&&null===a.bufferedRequest&&!a.finished&&!a.writing}function x(a,b){a._final(function(c){b.pendingcb--,c&&a.emit("error",c),b.prefinished=!0,a.emit("prefinish"),y(a,b)})}function y(d,b){var c,a,e=w(b);return e&&(c=d,(a=b).prefinished||a.finalCalled||("function"==typeof c._final?(a.pendingcb++,a.finalCalled=!0,g.nextTick(x,c,a)):(a.prefinished=!0,c.emit("prefinish"))),0===b.pendingcb&&(b.finished=!0,d.emit("finish"))),e}function z(a,b,d){var c=a.entry;for(a.entry=null;c;){var e=c.callback;b.pendingcb--,e(d),c=c.next}b.corkedRequestsFree?b.corkedRequestsFree.next=a:b.corkedRequestsFree=a}d.inherits(a,h),i.prototype.getBuffer=function(){for(var a=this.bufferedRequest,b=[];a;)b.push(a),a=a.next;return b},function(){try{Object.defineProperty(i.prototype,"buffer",{get:n.deprecate(function(){return this.getBuffer()},"_writableState.buffer is deprecated. Use _writableState.getBuffer instead.","DEP0003")})}catch(a){}}(),"function"==typeof Symbol&&Symbol.hasInstance&&"function"==typeof Function.prototype[Symbol.hasInstance]?(c=Function.prototype[Symbol.hasInstance],Object.defineProperty(a,Symbol.hasInstance,{value:function(b){return!!c.call(this,b)||this===a&&b&&b._writableState instanceof i}})):c=function(a){return a instanceof this},a.prototype.pipe=function(){this.emit("error",new Error("Cannot pipe, not readable"))},a.prototype.write=function(b,a,c){var l,m,n,i,s,t,f,u,j,d,k,e=this._writableState,v=!1,h=!e.objectMode&&(k=b,o.isBuffer(k)||k instanceof p);return h&&!o.isBuffer(b)&&(b=(l=b,o.from(l))),("function"==typeof a&&(c=a,a=null),h?a="buffer":a||(a=e.defaultEncoding),"function"!=typeof c&&(c=q),e.ended)?(m=this,n=c,i=new Error("write after end"),m.emit("error",i),g.nextTick(n,i)):(h||(s=this,t=e,f=b,u=c,j=!0,d=!1,null===f?d=new TypeError("May not write null values to stream"):"string"==typeof f|| void 0===f||t.objectMode||(d=new TypeError("Invalid non-string/buffer chunk")),d&&(s.emit("error",d),g.nextTick(u,d),j=!1),j))&&(e.pendingcb++,v=function(m,a,e,b,d,g){if(!e){var f,c,h,i=(f=a,c=b,h=d,f.objectMode|| !1===f.decodeStrings||"string"!=typeof c||(c=o.from(c,h)),c);b!==i&&(e=!0,d="buffer",b=i)}var j=a.objectMode?1:b.length;a.length+=j;var k=a.length<a.highWaterMark;if(k||(a.needDrain=!0),a.writing||a.corked){var l=a.lastBufferedRequest;a.lastBufferedRequest={chunk:b,encoding:d,isBuf:e,callback:g,next:null},l?l.next=a.lastBufferedRequest:a.bufferedRequest=a.lastBufferedRequest,a.bufferedRequestCount+=1}else r(m,a,!1,j,b,d,g);return k}(this,e,h,b,a,c)),v},a.prototype.cork=function(){var a=this._writableState;a.corked++},a.prototype.uncork=function(){var a=this._writableState;!a.corked||(a.corked--,a.writing||a.corked||a.finished||a.bufferProcessing||!a.bufferedRequest||v(this,a))},a.prototype.setDefaultEncoding=function(a){if("string"==typeof a&&(a=a.toLowerCase()),!(["hex","utf8","utf-8","ascii","binary","base64","ucs2","ucs-2","utf16le","utf-16le","raw"].indexOf((a+"").toLowerCase())> -1))throw new TypeError("Unknown encoding: "+a);return this._writableState.defaultEncoding=a,this},Object.defineProperty(a.prototype,"writableHighWaterMark",{enumerable:!1,get:function(){return this._writableState.highWaterMark}}),a.prototype._write=function(b,c,a){a(new Error("_write() is not implemented"))},a.prototype._writev=null,a.prototype.end=function(a,b,h){var e,c,f,d=this._writableState;"function"==typeof a?(h=a,a=null,b=null):"function"==typeof b&&(h=b,b=null),null!=a&&this.write(a,b),d.corked&&(d.corked=1,this.uncork()),d.ending||d.finished||(e=this,c=d,f=h,c.ending=!0,y(e,c),f&&(c.finished?g.nextTick(f):e.once("finish",f)),c.ended=!0,e.writable=!1)},Object.defineProperty(a.prototype,"destroyed",{get:function(){return void 0!==this._writableState&&this._writableState.destroyed},set:function(a){this._writableState&&(this._writableState.destroyed=a)}}),a.prototype.destroy=e.destroy,a.prototype._undestroy=e.undestroy,a.prototype._destroy=function(a,b){this.end(),b(a)}},93912:function(b,d,c){"use strict";var e=c(64591).Buffer,a=c(50522);function f(a,b,c){a.copy(b,c)}b.exports=function(){function a(){(function(a,b){if(!(a instanceof b))throw new TypeError("Cannot call a class as a function")})(this,a),this.head=null,this.tail=null,this.length=0}return a.prototype.push=function(b){var a={data:b,next:null};this.length>0?this.tail.next=a:this.head=a,this.tail=a,++this.length},a.prototype.unshift=function(b){var a={data:b,next:this.head};0===this.length&&(this.tail=a),this.head=a,++this.length},a.prototype.shift=function(){if(0!==this.length){var a=this.head.data;return 1===this.length?this.head=this.tail=null:this.head=this.head.next,--this.length,a}},a.prototype.clear=function(){this.head=this.tail=null,this.length=0},a.prototype.join=function(c){if(0===this.length)return"";for(var a=this.head,b=""+a.data;a=a.next;)b+=c+a.data;return b},a.prototype.concat=function(d){if(0===this.length)return e.alloc(0);if(1===this.length)return this.head.data;for(var b=e.allocUnsafe(d>>>0),a=this.head,c=0;a;)f(a.data,b,c),c+=a.data.length,a=a.next;return b},a}(),a&&a.inspect&&a.inspect.custom&&(b.exports.prototype[a.inspect.custom]=function(){var b=a.inspect({length:this.length});return this.constructor.name+" "+b})},55513:function(a,c,b){"use strict";var d=b(88212);function e(a,b){a.emit("error",b)}a.exports={destroy:function(a,b){var g=this,c=this._readableState&&this._readableState.destroyed,f=this._writableState&&this._writableState.destroyed;return c||f?(b?b(a):!a||this._writableState&&this._writableState.errorEmitted||d.nextTick(e,this,a),this):(this._readableState&&(this._readableState.destroyed=!0),this._writableState&&(this._writableState.destroyed=!0),this._destroy(a||null,function(a){!b&&a?(d.nextTick(e,g,a),g._writableState&&(g._writableState.errorEmitted=!0)):b&&b(a)}),this)},undestroy:function(){this._readableState&&(this._readableState.destroyed=!1,this._readableState.reading=!1,this._readableState.ended=!1,this._readableState.endEmitted=!1),this._writableState&&(this._writableState.destroyed=!1,this._writableState.ended=!1,this._writableState.ending=!1,this._writableState.finished=!1,this._writableState.errorEmitted=!1)}}},84104:function(a,c,b){a.exports=b(17187).EventEmitter},96801:function(c,a,b){(a=c.exports=b(44278)).Stream=a,a.Readable=a,a.Writable=b(10759),a.Duplex=b(45867),a.Transform=b(60062),a.PassThrough=b(3431)},64591:function(f,d,g){var c=g(48764),b=c.Buffer;function e(a,c){for(var b in a)c[b]=a[b]}function a(a,c,d){return b(a,c,d)}b.from&&b.alloc&&b.allocUnsafe&&b.allocUnsafeSlow?f.exports=c:(e(c,d),d.Buffer=a),e(b,a),a.from=function(a,c,d){if("number"==typeof a)throw new TypeError("Argument must not be a number");return b(a,c,d)},a.alloc=function(d,c,e){if("number"!=typeof d)throw new TypeError("Argument must be a number");var a=b(d);return void 0!==c?"string"==typeof e?a.fill(c,e):a.fill(c):a.fill(0),a},a.allocUnsafe=function(a){if("number"!=typeof a)throw new TypeError("Argument must be a number");return b(a)},a.allocUnsafeSlow=function(a){if("number"!=typeof a)throw new TypeError("Argument must be a number");return c.SlowBuffer(a)}},47989:function(e,b,c){"use strict";var d=c(64591).Buffer,f=d.isEncoding||function(a){switch((a=""+a)&&a.toLowerCase()){case"hex":case"utf8":case"utf-8":case"ascii":case"binary":case"base64":case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":case"raw":return!0;default:return!1}};function a(b){var a;switch(this.encoding=function(a){var b=function(a){var b;if(!a)return"utf8";for(;;)switch(a){case"utf8":case"utf-8":return"utf8";case"ucs2":case"ucs-2":case"utf16le":case"utf-16le":return"utf16le";case"latin1":case"binary":return"latin1";case"base64":case"ascii":case"hex":return a;default:if(b)return;a=(""+a).toLowerCase(),b=!0}}(a);if("string"!=typeof b&&(d.isEncoding===f||!f(a)))throw new Error("Unknown encoding: "+a);return b||a}(b),this.encoding){case"utf16le":this.text=i,this.end=j,a=4;break;case"utf8":this.fillLast=h,a=4;break;case"base64":this.text=k,this.end=l,a=3;break;default:this.write=m,this.end=n;return}this.lastNeed=0,this.lastTotal=0,this.lastChar=d.allocUnsafe(a)}function g(a){return a<=127?0:a>>5==6?2:a>>4==14?3:a>>3==30?4:a>>6==2?-1:-2}function h(a){var b=this.lastTotal-this.lastNeed,c=function(a,b,c){if((192&b[0])!=128)return a.lastNeed=0,"\uFFFD";if(a.lastNeed>1&&b.length>1){if((192&b[1])!=128)return a.lastNeed=1,"\uFFFD";if(a.lastNeed>2&&b.length>2&&(192&b[2])!=128)return a.lastNeed=2,"\uFFFD"}}(this,a,b);return void 0!==c?c:this.lastNeed<=a.length?(a.copy(this.lastChar,b,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal)):void(a.copy(this.lastChar,b,0,a.length),this.lastNeed-=a.length)}function i(a,c){if((a.length-c)%2==0){var b=a.toString("utf16le",c);if(b){var d=b.charCodeAt(b.length-1);if(d>=55296&&d<=56319)return this.lastNeed=2,this.lastTotal=4,this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1],b.slice(0,-1)}return b}return this.lastNeed=1,this.lastTotal=2,this.lastChar[0]=a[a.length-1],a.toString("utf16le",c,a.length-1)}function j(a){var b=a&&a.length?this.write(a):"";if(this.lastNeed){var c=this.lastTotal-this.lastNeed;return b+this.lastChar.toString("utf16le",0,c)}return b}function k(a,c){var b=(a.length-c)%3;return 0===b?a.toString("base64",c):(this.lastNeed=3-b,this.lastTotal=3,1===b?this.lastChar[0]=a[a.length-1]:(this.lastChar[0]=a[a.length-2],this.lastChar[1]=a[a.length-1]),a.toString("base64",c,a.length-b))}function l(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+this.lastChar.toString("base64",0,3-this.lastNeed):b}function m(a){return a.toString(this.encoding)}function n(a){return a&&a.length?this.write(a):""}b.s=a,a.prototype.write=function(a){var c,b;if(0===a.length)return"";if(this.lastNeed){if(void 0===(c=this.fillLast(a)))return"";b=this.lastNeed,this.lastNeed=0}else b=0;return b<a.length?c?c+this.text(a,b):this.text(a,b):c||""},a.prototype.end=function(a){var b=a&&a.length?this.write(a):"";return this.lastNeed?b+"\uFFFD":b},a.prototype.text=function(a,b){var c=function(d,c,e){var b=c.length-1;if(b<e)return 0;var a=g(c[b]);return a>=0?(a>0&&(d.lastNeed=a-1),a):--b<e|| -2===a?0:(a=g(c[b]))>=0?(a>0&&(d.lastNeed=a-2),a):--b<e|| -2===a?0:(a=g(c[b]))>=0?(a>0&&(2===a?a=0:d.lastNeed=a-3),a):0}(this,a,b);if(!this.lastNeed)return a.toString("utf8",b);this.lastTotal=c;var d=a.length-(c-this.lastNeed);return a.copy(this.lastChar,0,d),a.toString("utf8",b,d)},a.prototype.fillLast=function(a){if(this.lastNeed<=a.length)return a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,this.lastNeed),this.lastChar.toString(this.encoding,0,this.lastTotal);a.copy(this.lastChar,this.lastTotal-this.lastNeed,0,a.length),this.lastNeed-=a.length}},14650:function(b,g,a){var h=a(34155),e=a(96801).Transform,f=a(89539).inherits,i=a(47529);function d(a){e.call(this,a),this._destroyed=!1}function j(a,c,b){b(null,a)}function c(a){return function(c,b,d){return"function"==typeof c&&(d=b,b=c,c={}),"function"!=typeof b&&(b=j),"function"!=typeof d&&(d=null),a(c,b,d)}}f(d,e),d.prototype.destroy=function(a){if(!this._destroyed){this._destroyed=!0;var b=this;h.nextTick(function(){a&&b.emit("error",a),b.emit("close")})}},b.exports=c(function(c,e,b){var a=new d(c);return a._transform=e,b&&(a._flush=b),a}),b.exports.ctor=c(function(e,c,b){function a(b){if(!(this instanceof a))return new a(b);this.options=i(e,b),d.call(this,this.options)}return f(a,d),a.prototype._transform=c,b&&(a.prototype._flush=b),a}),b.exports.obj=c(function(c,e,b){var a=new d(i({objectMode:!0,highWaterMark:16},c));return a._transform=e,b&&(a._flush=b),a})}}])